## shTDA7439 - библиотека для работы с аудиопроцессором TDA7439

- [Описание TDA7439](#описание-tda7439)
- [Описание библиотеки](#описание-библиотеки)
- [Методы класса shTDA7439](#методы-класса-shtda7439)
  - [Остальные методы класса](#остальные-методы-класса)


### Описание TDA7439

**TDA7439** – регулятор громкости и трехполосный регулятор тембра, разработанный для использования в HI-FI аппаратуре и качественных автомобильных аудиосистемах, обладает низким уровнем шумов и искажений.

Основные технические характеристики ИМС **TDA7439**:

- Коммутация входов — 4 стерео канала;
- Предусиление от 0 до 30 дБ (с шагом 2 дБ, 0..15);
- Один стерео выход;
- Громкость 48 уровней от -47 до 0 дБ (0..47);
- Регулировка тембра НЧ, СЧ, ВЧ  ±14 дБ (с шагом 2 дБ, -7..7);
- Приглушение звука на выходе от -79 до 0 дБ (0..79);
- Регулировка баланса ±79 дБ (-79..79);
- Напряжение питания от 6 до 10,2 В (типовое значение 9 В);
- КНИ на частоте 1 кГц не более 0,01%;
- Управление осуществляется по шине **I2C**; адрес устройства на шине - 0x44;

### Описание библиотеки

Кратко - библиотека позволяет управлять **TDA7439**, используя все ее возможности. Написана по мотивам гуляющей по сети в разных вариантах библиотеки **TDA7439.h**

Управление ведется через шину **I2C**, при этом есть возможность использования любого доступного интерфейса.

### Методы класса shTDA7439

Экземпляр класса объявляется без каких либо аргументов:
```
shTDA7439 tda;
```

Перед началом работы с микросхемой нужно вызвать метод `begin()`, с указанием **I2C**-интерфейса, если он отличается от интерфейса по умолчанию (`Wire`):
```
tda.begin(); // если используется Wire

tda.begin(&Wire1); // если используется другой интерфейс, в данном случае Wire1
```

#### Остальные методы класса

- `void setInput(const TDA7439_input input);` - выбор входа микросхемы;
  - `input` - вход, INPUT_4, INPUT_3, INPUT_2, INPUT_1

- `void setVolume(uint8_t volume);` - регулировка громкости;
  - `volume` - значение громкости в интервале 0..47; 0 - полное отключение звука;

- `void setEqRange(int8_t val, const TDA7439_bands range);` - установка полосы эквалайзера;
  - `val` - устанавливаемое значение в интервале -7..7;
  - `range` - полоса эквалайзера, BASS (низкие частоты), MIDDLE (средние частоты), TREBBLE (высокие частоты);

- `void setTimbre(int8_t bass, int8_t middle, int8_t trebble);` - установка тембра по всем трем полосам одновременно;
  - `bass` - низкие частоты, -7..7;
  - `middle` - средние частоты, -7..7;
  - `trebble` - высокие частоты, -7..7;

`- void mute();` - отключение звука; равнозначно `setVolume(0);`

- `void setSpeakerAtt(const int8_t spk_att);`
 - установка величины приглушения звука на выходе;
  - `spk_att` - устанавливаемое значение в интервале 0..79; 79 - полное отключение звука на выходе; установленное значение действует для обоих выходов;

- `void setBalance(const int8_t balance);` - установка баланса;
  - `balance` - устанавливаемое значение в интервале -79..79; если `balance < 0`, приглушается правый канал, если `balance > 0`, приглушается левый канал;

*при регулировке баланса учитывается установленное значение приглушение звука на выходе, сумма его с модулем значения `balance` не должно превышать 79.*

***

Если возникнут вопросы, пишите на valesh-soft@yandex.ru